<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Bestellverlauf</title>
</head>
<body>
<div th:replace="navigation :: navigation"></div>
<section layout:fragment="content">
	<h2 class="underlined-text">Ihr Bestellverlauf</h2>
		<div th:if="${!userOrders.iterator().hasNext()}" class="ui compact message">
				Sie haben noch keine Bestellungen
		</div>
    <table th:if="${userOrders.iterator().hasNext()}" class="ui striped center aligned table">
        <thead>
        	<tr class="bold">
				<th>ID</th>
            	<th>Angebottyp</th>
				<th>Veranstaltungsdatum</th>
				<th>Aktionen</th>
       		 </tr>
       	</thead>
       	<tbody>
	        <tr th:each="order : ${userOrders}">
	            <td th:text="${order.id}">000</td>
				<!--TODO handle das Abrufen von Angebottyp
				<td th:text="${orderTypes.get(order.id)}">Event Catering</td>-->
				<td>Platz halter für Angebottyp</td>
				<td th:text="${#conversions.convert(order.completionDate, 'String')}">TT.MM.JJJJ</td>
				<td><a class="ui black basic button" th:href="@{/order-details/{order-id}(order-id=${order.id})}">Zu Details</a>
					<!--Stornierenform-->
					<form th:if="${order.orderStatus.toString().equals('OPEN') || order.orderStatus.toString().equals('PAID')}"
							th:action="@{/cancel-order}" method="get" th:object="${orderForm}"
							style="display: inline;"
							onsubmit="return confirm('Möchen Sie Diese Bestellung stornieren?')">
						<input type="hidden" th:value="${orderForm}">
						<input type="hidden" name="orderId" th:value="${order.id}">
						<button type="submit" class="ui red basic button">Bestellung stornieren</button>
					</form>
				</td>
	        </tr>
		</tbody>
    </table>
</section>
</body>
</html>